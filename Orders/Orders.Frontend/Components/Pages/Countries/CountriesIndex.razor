@page "/countries"
@using Orders.Frontend.Repositories
@using Orders.Shared.Entities
<h3>Countries List</h3>
@if (countries == null)
{
    <p>
        <Loading Label="Loading countries..." />
    </p>

}
else
{
    <table border="1">
        <tr>
            <td>Country</td>
        </tr>

        @foreach (var country in countries)
        {
            <tr>@country.Name</tr>
        }
    </table>
}
@code {

    [Inject] private IRepository Repository { get; set; } = null!;
    private List<Country>? countries;

    protected override async Task OnInitializedAsync()
    {
        var httpResult = await Repository.GetAsync<List<Country>>("api/countries");
        countries = httpResult.Response;
    }
}